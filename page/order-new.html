<!DOCTYPE html>
<html>

	<head>
		<meta charset="utf-8">
		<title>个人报修</title>
		<meta name="viewport" content="width=device-width, initial-scale=1,maximum-scale=1,user-scalable=no">
		<meta name="apple-mobile-web-app-capable" content="yes">
		<meta name="apple-mobile-web-app-status-bar-style" content="black">

		<link rel="stylesheet" href="../css/mui.min.css">
		<link rel="stylesheet" type="text/css" href="../css/icons-extra.css" />
		<link href="../css/css/mui.picker.css" rel="stylesheet" />
		<link href="../css/css/mui.poppicker.css" rel="stylesheet" />
		<link rel="stylesheet" type="text/css" href="../css/css/mui.picker.min.css" />
		<link rel="stylesheet" type="text/css" href="../upload/webuploader.css" />
		<style>
			html,
			body {
				background-color: #efeff4;
			}
			
			#offCanvasSideScroll {
				padding-top: 44px;
			}
			
			.content {
				padding: 0 15px
			}
			
			.content .about {
				padding: 10px 0 10px;
			}
			
			.orderNew {
				padding: 0 15px
			}
			
			#offCanvasSideScroll .mui-icon {
				font-size: 16PX;
			}
			
			.orderNew .mui-table-view-cell:after {
				left: 0
			}
			
			#submit {
				background: #ff5700;
				color: #fff;
				border-radius: 5px;
			}
			
			.mui-opacity {
				opacity: 0;
			}
			
			.mui-vertical {
				position: absolute;
				left: 50%;
				-webkit-transform: translate(-50%, 0);
				-ms-transform: translate(-50%, 0);
				transform: translate(-50%, 0);
			}
			
			.cross:after {
				position: absolute;
				content: '';
				width: 45px;
				height: 2px;
				background: #ccc;
				top: 50%;
				left: 50%;
				-webkit-transform: translate(-50%, -50%);
				-ms-transform: translate(-50%, -50%);
				transform: translate(-50%, -50%);
			}
			
			.cross:before {
				position: absolute;
				content: '';
				width: 2px;
				height: 45px;
				background: #ccc;
				top: 50%;
				left: 50%;
				-webkit-transform: translate(-50%, -50%);
				-ms-transform: translate(-50%, -50%);
				transform: translate(-50%, -50%);
			}
			
			.orderNew textarea {
				padding: 5px;
				margin-bottom: 0
			}
			
			#picture-list>.mui-btn:nth-child(4n+1) {
				margin: 0 -6px 1% 0;
			}
			
			#picture-list>.mui-btn {
				margin: 0 -6px 1%;
				margin-left: 1%
			}
			
			#picture-list>a>img {
				position: absolute;
				top: 0;
				left: 0;
				width: 100%;
				height: 100%;
				z-index: 1;
			}
			
			.ui-alert {
				text-align: center;
				padding: 20px 10px;
				font-size: 16px;
			}
			
			.mui-table-view {
				margin-bottom: 10px
			}
			.mui-icon-extra{
				font-size: 16px;
			}
			#offCanvasSideScroll [class^="mui-"]:before{
				color: #ff5700;
			}
		</style>
	</head>

	<body>
		<div class="orderNew">
			<header class="mui-bar mui-bar-nav mui-box-shadow-none">
				<a class="mui-action-back mui-icon mui-icon-left-nav mui-pull-left f-white"></a>
				<h1 class="mui-title">个人报修</h1>
			</header>
			<div id="offCanvasSideScroll" class="mui-scroll-wrapper mui-inner-wrap">
				<div class="mui-scroll">
					<div class="content">
						<form action="" method="post">
							<p class="about  mui-text-center">个人用户可在此报修，请填写需求内容<br />我们会尽快安排工作人员上门服务</p>
							<div class="mui-bar-nav">
								<ul class="mui-table-view">
									<li class="mui-table-view-cell">
										<a href="#" class="mui-navigate-right mui-icon mui-icon-map" id='showUserPicker'>
											报修地址
										</a>
									</li>
								</ul>
							</div>
							<div class="mui-bar-nav" id="orderList">
								<ul class="mui-table-view list-0">
									<li class="mui-table-view-cell">
										<a href="javascript:;" class="mui-navigate-right mui-icon mui-icon-bars showCityPicker">
											报修类型
										</a>
									</li>
									<li class="mui-table-view-cell demo3">
										<a href="javascript:;" id="demo3" data-options='{"value":"2015-10-10 10:10","beginYear":2010,"endYear":2020}' class="mui-navigate-right mui-icon-extra mui-icon-extra-outline">
											上门时间
										</a>
									</li>
									<li class="mui-table-view-cell">
										<div id="wrapper">
											<p class="order-title">你可以上传多张报修图片:</p>
											<div id="container">
												<!--头部，相册选择和格式选择-->
												<div id="uploader">
													<div class="queueList">
														<div id="dndArea" class="placeholder">
															<div id="filePicker"></div>
														</div>
													</div>
													<div class="statusBar" style="display:none;">
														<div class="btns">
															<div id="filePicker2"></div>
															<div class="uploadBtn">开始上传</div>
														</div>
													</div>
												</div>
											</div>
										</div>
									</li>
									<li class="mui-table-view-cell">
										<p class="order-title">请对报修项目进行描述:</p>
										<textarea name="" rows="5" cols="5"></textarea>
									</li>
								</ul>
							<!--</div>
							<br />
							<div class="mui-bar-nav">
								<ul class="mui-table-view">
									<li class="mui-table-view-cell">
										<a href="javascript:;" class="mui-text-center add">
											+增加报修项目
										</a>
									</li>
								</ul>
							</div>-->
						</form>
					</div>
					<br />
					<div>
						<ul class="mui-table-view">
							<li class="mui-table-view-cell">
								<a href="javascript:;" id="submit" class="mui-text-center">
									确认下单
								</a>
							</li>
						</ul>
					</div>
				</div>
			</div>
		</div>
		<div id="picture" class="mui-popover mui-popover-action mui-popover-bottom">
			<ul class="mui-table-view">
				<li class="mui-table-view-cell">
					<h4 class="mui-vertical">拍照或录像</h4>
					<input type="file" name="picture" id="camera" onchange="file(this)" class="mui-opacity" capture="camera" accept="image/*" />
				</li>
				<li class="mui-table-view-cell">
					<h4 class="mui-vertical">选取现有的</h4>
					<input type="file" name="picture" id="picture" onchange="file(this)" class="mui-opacity" accept="image/*" />
				</li>
			</ul>
			<ul class="mui-table-view">
				<li class="mui-table-view-cell">
					<a href="#picture" class=""><b>取消</b></a>
				</li>
			</ul>
		</div>
		<script type="text/javascript" src="../js/mui.min.js"></script>
		<script type="text/javascript" src="../js/js/mui.picker.min.js"></script>
		<script type="text/javascript" src="../js/js/mui.poppicker.js"></script>
		<script type="text/javascript" src="../js/js/data.js"></script>
		<script type="text/javascript" src="../upload/jquery.js"></script>
		<script type="text/javascript" src="../upload/webuploader.js"></script>
		<script type="text/javascript" src="../upload/html2canvas.js"></script>
		<script type="text/javascript" src="../upload/upload.js"></script>
		<script>
			mui.init({
				swipeBack: true //启用右滑关闭功能
			});
			//开启A标签的跳转
			mui('body').on('tap', 'a', function() {
				window.top.location.href = this.href;
			});
			//实现ios平台原生侧滑关闭页面；
			if(mui.os.plus && mui.os.ios) {
				mui.plusReady(function() {
					//5+ iOS暂时无法屏蔽popGesture时传递touch事件，故该demo直接屏蔽popGesture功能
					plus.webview.currentWebview().setStyle({
						'popGesture': 'none'
					});
				});
			}

			//初始化单页的区域滚动
			mui('.mui-scroll-wrapper').scroll();

			mui('body').on('shown', '.mui-popover', function(e) {
				//console.log('shown', e.detail.id);//detail为当前popover元素
			});
			mui('body').on('hidden', '.mui-popover', function(e) {
				//console.log('hidden', e.detail.id);//detail为当前popover元素
			});

			mui('body').on('tap', '.crossClick', function() {
				var a = this,
					parent;
				//根据点击按钮，反推当前是哪个actionsheet
				for(parent = a.parentNode; parent != document.body; parent = parent.parentNode) {
					if(parent.classList.contains('mui-popover-action')) {
						break;
					}
				}
				//关闭actionsheet
				mui('#' + parent.id).popover('toggle');
			})

			//控制上传图片的自适应宽度
			mui(function($) {
				var arr = document.querySelectorAll('.cross');
				for(var i = 0; i < arr.length; i++) {
					arr[i].style.padding = "12%";
				}

			});
			
			document.getElementById("submit").addEventListener('tap', function() {
				var btnArray = ['否', '是'];
				mui.confirm('你确定继续添加订单？', '温馨提示', btnArray, function(e) {
					if (e.index == 1) {
						info.innerText = '你刚确认MUI是个好框架';
					} else {
						info.innerText = 'MUI没有得到你的认可，继续加油'
					}
				})
			});
			
			(function($, doc) {
				$.init();
				$.ready(function() {
					//普通示例
					var userPicker = new $.PopPicker();
					userPicker.setData([{value:'2304',text:'杭州武林银泰男装'},{value:'2560',text:'好孩子长沙海信购物中心kids'},{value:'2816',text:'南京东方福来德商城'},{value:'3072',text:'玉玲电器'},{value:'3328',text:'兰州-nike 国芳百货店'},{value:'3584',text:'济南高新万达广场YA'},{value:'3840',text:'南京水游城'},{value:'4096',text:'沈阳市沈河区运动汇YA'},{value:'4352',text:'TC浙江宁波慈溪银泰'},{value:'4608',text:'嘉兴旭辉广场店'},{value:'4864',text:'191642-好孩子成都双流区双楠大道城南优品道YA'},{value:'5120',text:'阿迪达斯-太古店'},{value:'5376',text:'龙汇超市'},{value:'5632',text:'威海威高'},{value:'7916',text:'衡阳耐克1'}]);
					
					var showUserPickerButton = doc.getElementById('showUserPicker');
					var userResult = doc.getElementById('showUserPicker');
					showUserPickerButton.addEventListener('tap', function(event) {
						userPicker.show(function(items) {
							console.log(items[0]);
							userResult.innerText = items[0].text;
							//返回 false 可以阻止选择框的关闭
							//return false;
						});
					}, false);
					
				});
			})(mui, document);
		</script>
	</body>

</html>